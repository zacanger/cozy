Code based on github.com/chzyer/readline, MIT licensed, copyright (c) 2015 Chzyer.
